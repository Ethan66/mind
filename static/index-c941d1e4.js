import{ap as M,r as g,a9 as V,V as j,g as a,c as p,e as y,k as h,a2 as O,Y as k,as as T,at as A,d as P,aq as S,av as z,D as B,o as q,bB as u,bD as Y,I as w,w as b,bE as N,bF as X,bz as F,N as U,$ as Z,an as G,l as H,am as D,by as J}from"./index-63fe029b.js";import{b as v,m as C,c as K,l as I}from"./mind-map-4b05e5bb.js";import"./index-566a1d26.js";const R=m=>(T("data-v-b67d5951"),m=m(),A(),m),Q=R(()=>h("span",{class:"name"},"适应画布",-1)),W=R(()=>h("span",{class:"desc"},"Ctrl + i",-1)),ee=[Q,W],te={__name:"detail-context-menu",setup(m){const i=g(!1),n=V({left:0,top:0,mosuedownX:0,mosuedownY:0});let r=!1;const e=([t]=[])=>{t.which===3&&(n.mosuedownX=t.clientX,n.mosuedownY=t.clientY,r=!0)},s=([t]=[])=>{if(r){if(r=!1,Math.abs(n.mosuedownX-t.clientX)>3||Math.abs(n.mosuedownY-t.clientY)>3){c();return}f([t])}},f=([t]=[])=>{n.left=t.clientX+10,n.top=t.clientY+10,i.value=!0},c=()=>{i.value=!1,n.left=0,n.top=0};return v.on("svg_mousedown",e),v.on("mouseup",s),j(()=>{v.off("svg_mousedown",e),v.off("mouseup",s)}),(t,_)=>a(i)?(p(),y("div",{key:0,class:"contextmenuContainer listBox",style:O({left:a(n).left+"px",top:a(n).top+"px"})},[h("div",{class:"item",onClick:_[0]||(_[0]=()=>{a(C).v.view.fit(),c()})},[...ee])],4)):k("",!0)}},oe=M(te,[["__scopeId","data-v-b67d5951"],["__file","D:/Ethan/myCode/my-work/unicom-mind-map/src/views/detail/detail-context-menu.vue"]]),ne={class:"detail-page"},ae={style:{position:"absolute",right:"10px",display:"flex"}},se=P({__name:"index",setup(m){const i=S(),n=z(),r=i.path.replace(/^\/(([a-zA-Z-]+?\/)+)([a-z-A-Z]+)$/g,"$3"),e=V({current:i.query.commitId||"",options:[]});(()=>{const d=Object.assign({"/src/mindData/aa.json":()=>u(()=>import("./aa-d923ee77.js"),[]),"/src/mindData/adv-borrow-money.json":()=>u(()=>import("./adv-borrow-money-3c3810eb.js"),[]),"/src/mindData/borrow-bindbankcard_zyapi.json":()=>u(()=>import("./borrow-bindbankcard_zyapi-728730f5.js"),[]),"/src/mindData/borrow-money.json":()=>u(()=>import("./borrow-money-00d3d38a.js"),[]),"/src/mindData/borrow-money_aaaa.json":()=>u(()=>import("./borrow-money_aaaa-92bf782d.js"),[]),"/src/mindData/borrow-money_abc.json":()=>u(()=>import("./borrow-money_abc-f5d27344.js"),[]),"/src/mindData/borrow-money_xianxianghoufu.json":()=>u(()=>import("./borrow-money_xianxianghoufu-b3414409.js"),[])});e.options=Object.keys(d).filter(o=>o.includes(`/${r}_`)).map(o=>o.replace(new RegExp(`.+${r}_(\\w+)\\.json`),"$1")),i.query.commitId||(e.options.length&&(e.current=e.options[0]),n.push({path:i.path,query:{commitId:e.current}}))})(),B(()=>e.current,()=>{c()}),q(()=>{c()});const s=g(!1);let f={json:null};const c=()=>{clearTimeout(t);const d=`../../mindData/${r+(e.current?"_"+e.current:"")}.json`;u(()=>import(d),[]).then(o=>{s.value=!0,f.json=o.default})};Y(()=>{s.value&&(K({el:document.querySelector("#mindMapContainer")}),C.v.setFullData(f.json))});let t=null;const _=()=>{s.value&&(s.value=!1,t=setTimeout(c,300))};v.on("renderMindMap",_),window.addEventListener("resize",_),j(()=>{window.removeEventListener("resize",_)});const E=d=>{I.remove("data"),I.remove("editing"),n.push({name:"edit",query:{operateType:d,pageName:r,commitId:e.current}})};return(d,o)=>{const $=J,L=F,x=U;return p(),y("div",ne,[h("div",ae,[w(L,{modelValue:a(e).current,"onUpdate:modelValue":o[0]||(o[0]=l=>a(e).current=l),style:{"margin-right":"10px",width:"150px"},placeholder:"commitId",onChange:o[1]||(o[1]=()=>{s.value=!1,d.$router.push({path:d.$route.path,query:{commitId:a(e).current}})})},{default:b(()=>[(p(!0),y(Z,null,G(a(e).options,l=>(p(),H($,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),w(x,{type:"primary",icon:a(N),onClick:o[2]||(o[2]=l=>E("add"))},{default:b(()=>[D("新 增")]),_:1},8,["icon"]),w(x,{type:"warning",icon:a(X),onClick:o[3]||(o[3]=l=>E("edit"))},{default:b(()=>[D("编 辑")]),_:1},8,["icon"])]),w(oe),a(s)?(p(),y("div",{id:"mindMapContainer",key:a(e).current})):k("",!0)])}}});const ue=M(se,[["__file","D:/Ethan/myCode/my-work/unicom-mind-map/src/views/detail/index.vue"]]);export{ue as default};
